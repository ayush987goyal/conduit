webpackJsonp([1],{0:function(t,e,s){t.exports=s("NHnr")},"7zck":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("/5sW"),r=s("3EgV"),i=s.n(r),n=s("IHMs"),o=s.n(n),l=(s("7zck"),s("Biqn")),u=s.n(l),c=s("NYxO"),d={data:function(){return{title:"Conduit"}},props:["user"],computed:{menuItems:function(){var t=[{icon:"touch_app",title:"Sign in",link:"/login"},{icon:"group_add",title:"Sign up",link:"/register"}];return this.user&&(t=[{icon:"note_add",title:"New Article",link:"/editor"},{icon:"settings",title:"Settings",link:"/settings"},{icon:"account_circle",title:this.user.username,link:"/@".concat(this.user.username)}]),t}}},m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-toolbar",{attrs:{app:""}},[s("v-toolbar-title",{staticClass:"headline ml-5 main-title",on:{click:function(e){t.$router.push("/")}}},[t._v(t._s(t.title))]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{attrs:{flat:"",to:"/"}},[s("v-icon",{attrs:{left:"",color:"green lighten-1"}},[t._v("home")]),t._v("\n      Home\n    ")],1),t._l(t.menuItems,function(e){return s("v-btn",{key:e.title,attrs:{flat:"",to:e.link}},[s("v-icon",{attrs:{left:"",color:"green lighten-1"}},[t._v(t._s(e.icon))]),t._v("\n      "+t._s(e.title)+"\n    ")],1)})],2)],1)},v=[],f=s("XyMi");function p(t){s("n9Ul")}var g=!1,h=p,b="data-v-46bcbc6a",x=null,y=Object(f["a"])(d,m,v,g,h,b,x),_=y.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-footer",{attrs:{app:""}})},k=[],E=null,L=!1,C=null,$=null,S=null,U=Object(f["a"])(E,w,k,L,C,$,S),q=U.exports,j={props:{text:{type:String,required:!0}},methods:{onClose:function(){this.$emit("dismissed")}}},O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-alert",{attrs:{color:"error",icon:"error",dismissible:"",value:!0},on:{input:t.onClose}},[t._v("\n  "+t._s(t.text)+"\n")])},R=[],A=!1,T=null,D=null,F=null,I=Object(f["a"])(j,O,R,A,T,D,F),N=I.exports,z={components:{TheHeader:_,TheFooter:q,Alert:N},computed:u()({},Object(c["b"])({user:function(t){return t.user.user},loading:function(t){return t.shared.loading},error:function(t){return t.shared.error}})),methods:{clearError:function(){this.$store.commit("clearError")}},created:function(){this.$store.dispatch("tryAutoLogin")}},B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("TheHeader",{attrs:{user:t.user}}),s("v-content",[t.loading?s("v-progress-linear",{staticStyle:{"margin-top":"1px"},attrs:{indeterminate:!0}}):t._e(),t.error?s("Alert",{attrs:{text:t.error},on:{dismissed:t.clearError}}):t._e(),s("v-container",{attrs:{fluid:""}},[s("router-view")],1)],1),s("TheFooter")],1)},H=[],P=!1,Y=null,M=null,W=null,G=Object(f["a"])(z,B,H,P,Y,M,W),J=G.exports,Q=s("/ocq"),V=s("mtWM"),X=s.n(V),K=X.a.create({baseURL:"/api"});K.interceptors.request.use(function(t){var e="Bearer ".concat(localStorage.getItem("token"));return t.headers.Authorization=e,t});var Z=K,tt={props:{username:{type:String,required:!0},image:{type:String,default:"https://static.productionready.io/images/smiley-cyrus.jpg"},date:{type:Date,required:!0}}},et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",[s("a",{on:{click:function(e){t.$emit("clicked")}}},[s("v-avatar",{staticClass:"mr-2"},[s("img",{attrs:{src:t.image,alt:"User Avatar"}})])],1),s("v-layout",{attrs:{column:""}},[s("a",{on:{click:function(e){t.$emit("clicked")}}},[s("h3",{staticClass:"green--text text--lighten-1"},[t._v(t._s(t.username))])]),s("span",{staticClass:"grey--text"},[t._v(" "+t._s(t._f("date")(t.date))+" ")])])],1)},st=[],at=!1,rt=null,it=null,nt=null,ot=Object(f["a"])(tt,et,st,at,rt,it,nt),lt=ot.exports,ut={props:{active:{type:Boolean,required:!0},favorites:{type:Number,required:!0}},data:function(){return{isEnabled:0}},mounted:function(){this.isEnabled=this.active?0:1},watch:{active:function(t){this.isEnabled=t?0:1}}},ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-btn-toggle",{attrs:{"input-value":t.isEnabled}},[s("v-btn",{attrs:{outline:"",color:"green"},on:{click:function(e){t.$emit("toggled")}}},[t._v("\n    "+t._s(t.favorites)+" Â \n    "),s("v-icon",[t._v("favorite")])],1)],1)},dt=[],mt=!1,vt=null,ft=null,pt=null,gt=Object(f["a"])(ut,ct,dt,mt,vt,ft,pt),ht=gt.exports,bt={components:{UserAvatar:lt,FavoriteButton:ht},props:{username:{type:String,required:!0},userImage:{type:String},articleDate:{type:Date,required:!0},articleTitle:{type:String,required:!0},articleDescription:{type:String,required:!0},articleFavCount:{type:Number,required:!0},articleTagList:{type:Array},isFavorite:{type:Boolean,required:!0}}},xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{staticClass:"mt-1"},[s("v-container",[s("v-layout",{attrs:{"align-center":"","justify-end":""}},[s("v-flex",{attrs:{xs3:""}},[s("UserAvatar",{attrs:{username:t.username,image:t.userImage,date:t.articleDate},on:{clicked:function(e){t.$emit("userClicked")}}})],1),s("v-flex",{staticClass:"pr-1",attrs:{"offset-xs9":""}},[s("FavoriteButton",{attrs:{active:t.isFavorite,favorites:t.articleFavCount},on:{toggled:function(e){t.$emit("favToggled")}}})],1)],1),s("v-layout",{staticClass:"mt-3 ml-1",attrs:{column:""}},[s("h2",[t._v(t._s(t.articleTitle))]),s("p",{staticClass:"grey--text"},[t._v(t._s(t.articleDescription))])]),s("v-layout",{staticClass:"ml-1",attrs:{"align-center":""}},[s("span",{staticClass:"grey--text",staticStyle:{cursor:"pointer"},on:{click:function(e){t.$emit("readClicked")}}},[t._v("Read more...")]),s("v-spacer"),t._l(t.articleTagList,function(e){return s("v-chip",{key:e,attrs:{small:""}},[t._v(t._s(e))])})],2)],1)],1)},yt=[],_t=!1,wt=null,kt=null,Et=null,Lt=Object(f["a"])(bt,xt,yt,_t,wt,kt,Et),Ct=Lt.exports,$t={components:{ArticleItem:Ct},computed:u()({},Object(c["b"])({loading:function(t){return t.shared.loading}})),data:function(){return{active:null,tabs:["Your Feed","Global Feed"],articles:null,tagList:null}},watch:{active:function(t){0===+t?(this.tabs=this.tabs.slice(0,2),this.populateArticles("/articles/feed")):1===+t&&(this.tabs=this.tabs.slice(0,2),this.populateArticles("/articles"))}},mounted:function(){var t=this;Z.get("/tags").then(function(e){return t.tagList=e.data.tags})},methods:{doStuff:function(t){console.log("yo",t)},addTagFilter:function(t){var e=this;if(this.tabs.length>2)return this.tabs=this.tabs.slice(0,2),this.active="".concat(+this.active-1),void setTimeout(function(){e.tabs.push("#".concat(t)),e.active="".concat(e.tabs.length-1),e.populateArticles("/articles",{params:{tag:t}})},1);this.tabs.push("#".concat(t)),this.active="".concat(this.tabs.length-1),this.populateArticles("/articles",{params:{tag:t}})},populateArticles:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.articles=null,this.$store.commit("setLoading",!0),Z.get(t,s).then(function(t){e.$store.commit("setLoading",!1),e.articles=t.data.articles}).catch(function(){e.$store.commit("setLoading",!1)})}}},St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{"justify-space-between":""}},[s("v-flex",{attrs:{xs9:""}},[s("v-tabs",{attrs:{"slider-color":"green"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._l(t.tabs,function(e){return s("v-tab",{key:e},[t._v("\n          "+t._s(e)+"\n        ")])}),t._l(t.tabs,function(e){return s("v-tab-item",{key:e,class:{"mt-3":!t.articles||t.articles.length<=0}},[t._l(t.articles,function(e){return t.articles?s("ArticleItem",{key:e.slug,attrs:{username:e.author.username,articleDate:new Date(e.createdAt),articleTitle:e.title,articleDescription:e.description,articleFavCount:e.favoritesCount,articleTagList:e.tagList,isFavorite:e.favorited},on:{userClicked:function(s){t.doStuff(e)},favToggled:function(s){t.doStuff(e)},readClicked:function(s){t.doStuff(e)}}}):t._e()}),t.loading?s("span",[t._v("\n            Loading...\n          ")]):t._e(),t.loading||t.articles&&!(t.articles.length<=0)?t._e():s("span",[t._v("\n            No articles to display.\n          ")])],2)})],2)],1),s("v-flex",[s("v-card",{staticClass:"ml-2"},[s("v-card-title",[t._v("Popular Tags")]),s("div",{staticClass:"pl-2 pb-2"},t._l(t.tagList,function(e){return s("v-chip",{key:e,attrs:{small:""},on:{click:function(s){t.addTagFilter(e)}}},[t._v("\n            "+t._s(e)+"\n          ")])}))],1)],1)],1)],1)},Ut=[],qt=!1,jt=null,Ot=null,Rt=null,At=Object(f["a"])($t,St,Ut,qt,jt,Ot,Rt),Tt=At.exports,Dt={data:function(){return{valid:!1,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}],password:"",passwordRules:[function(t){return!!t||"Password is required"}]}},computed:u()({},Object(c["b"])({user:function(t){return t.user.user}})),watch:{user:function(t){null!==t&&void 0!==t&&this.$router.push("/")}},methods:{submit:function(){var t={email:this.email,password:this.password};this.$store.dispatch("signUserIn",{user:t}),this.$refs.form.reset()}}},Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{row:""}},[s("v-flex",{staticClass:"text-xs-center",attrs:{xs6:"","offset-xs3":""}},[s("h2",{staticClass:"display-2 mb-2"},[t._v("Sign in")]),s("router-link",{staticClass:"link subheading",attrs:{to:"/register"}},[t._v("Need an account?")])],1)],1),s("v-layout",{attrs:{row:""}},[s("v-flex",{staticClass:"mt-3",attrs:{xs6:"","offset-xs3":""}},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){t.preventDefault()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{label:"E-mail",rules:t.emailRules,"validate-on-blur":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-text-field",{attrs:{label:"Enter your password",rules:t.passwordRules,type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("v-btn",{staticClass:"mt-4 ml-0",attrs:{type:"submit",color:"primary",disabled:!t.valid},on:{click:t.submit}},[t._v("\n          Sign in\n        ")])],1)],1)],1)],1)},It=[];function Nt(t){s("gNjY")}var zt=!1,Bt=Nt,Ht="data-v-92dad30c",Pt=null,Yt=Object(f["a"])(Dt,Ft,It,zt,Bt,Ht,Pt),Mt=Yt.exports,Wt={data:function(){return{valid:!1,username:"",usernameRules:[function(t){return!!t||"Username is required"}],email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}],password:"",passwordRules:[function(t){return!!t||"Password is required"}]}},computed:u()({},Object(c["b"])({user:function(t){return t.user.user}})),watch:{user:function(t){null!==t&&void 0!==t&&this.$router.push("/")}},methods:{submit:function(){var t={username:this.username,password:this.password,email:this.email};this.$store.dispatch("signUserUp",{user:t}),this.$refs.form.reset()}}},Gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{row:""}},[s("v-flex",{staticClass:"text-xs-center",attrs:{xs6:"","offset-xs3":""}},[s("h2",{staticClass:"display-2 mb-2"},[t._v("Sign up")]),s("router-link",{staticClass:"link subheading",attrs:{to:"/login"}},[t._v("Have an account?")])],1)],1),s("v-layout",{attrs:{row:""}},[s("v-flex",{staticClass:"mt-3",attrs:{xs6:"","offset-xs3":""}},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){t.preventDefault()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{label:"Username",rules:t.usernameRules,"validate-on-blur":""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("v-text-field",{attrs:{label:"E-mail",rules:t.emailRules,"validate-on-blur":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-text-field",{attrs:{label:"Enter your password",rules:t.passwordRules,type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("v-btn",{staticClass:"mt-4 ml-0",attrs:{type:"submit",color:"primary",disabled:!t.valid},on:{click:t.submit}},[t._v("\n          Sign up\n        ")])],1)],1)],1)],1)},Jt=[];function Qt(t){s("wcky")}var Vt=!1,Xt=Qt,Kt="data-v-3282ba14",Zt=null,te=Object(f["a"])(Wt,Gt,Jt,Vt,Xt,Kt,Zt),ee=te.exports,se={computed:u()({},Object(c["b"])({user:function(t){return t.user.user}})),data:function(){return{valid:!1,image:"",username:"",usernameRules:[function(t){return!!t||"Username is required"}],bio:"",email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}],password:""}},mounted:function(){this.image=this.user.image,this.username=this.user.username,this.bio=this.user.bio,this.email=this.user.email},methods:{submit:function(){var t={username:this.username,email:this.email,bio:this.bio,image:this.image};this.password&&(t.password=this.password),this.$store.dispatch("updateUser",{user:t}),this.password=""},logout:function(){this.$store.dispatch("logUserOut"),this.$router.push("/login")}}},ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{row:""}},[s("v-flex",{staticClass:"text-xs-center",attrs:{xs6:"","offset-xs3":""}},[s("h2",{staticClass:"display-2 mb-2"},[t._v("Your Settings")])])],1),s("v-layout",{attrs:{row:""}},[s("v-flex",{staticClass:"mt-3",attrs:{xs6:"","offset-xs3":""}},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(t){t.preventDefault()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{label:"URL of profile picture"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),s("v-text-field",{attrs:{label:"Username",rules:t.usernameRules,"validate-on-blur":""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("v-text-field",{attrs:{label:"Short bio about you","multi-line":""},model:{value:t.bio,callback:function(e){t.bio=e},expression:"bio"}}),s("v-text-field",{attrs:{label:"E-mail",rules:t.emailRules,"validate-on-blur":""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-text-field",{attrs:{label:"New password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("v-btn",{staticClass:"mt-4 ml-0",attrs:{type:"submit",color:"primary",disabled:!t.valid},on:{click:t.submit}},[t._v("\n          Update Settings\n        ")])],1)],1)],1),s("v-layout",{attrs:{row:""}},[s("v-flex",{staticClass:"mt-3",attrs:{xs6:"","offset-xs3":""}},[s("hr"),s("v-btn",{staticClass:"mt-4 ml-0",attrs:{outline:"",small:"",color:"error"},on:{click:t.logout}},[t._v("\n        Or click here to logout\n        ")])],1)],1)],1)},re=[],ie=!1,ne=null,oe=null,le=null,ue=Object(f["a"])(se,ae,re,ie,ne,oe,le),ce=ue.exports,de=s("rzQm"),me=s.n(de),ve={data:function(){return{valid:!1,title:"",titleRules:[function(t){return!!t||"Title is required"}],description:"",descriptionRules:[function(t){return!!t||"Decsription is required"}],body:"",bodyRules:[function(t){return!!t||"Body is required"}],tagList:[]}},methods:{remove:function(t){this.tagList.splice(this.tagList.indexOf(t),1),this.tagList=me()(this.tagList)},submit:function(){var t=this,e={title:this.title,description:this.description,body:this.body,tagList:this.tagList};this.$store.dispatch("createArticle",{article:e}).then(function(e){return t.$router.push("/article/".concat(e.article.slug))})}}},fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs8:"","offset-xs2":""}},[s("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-text-field",{attrs:{label:"Article Title",rules:t.titleRules,"validate-on-blur":""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),s("v-text-field",{attrs:{label:"What's this article about?",rules:t.descriptionRules,"validate-on-blur":""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),s("v-text-field",{attrs:{label:"Write your article (in markdown)",rules:t.bodyRules,"multi-line":""},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}}),s("v-select",{staticClass:"mt-3",attrs:{label:"Enter tags",chips:"",tags:"",solo:"","append-icon":"",clearable:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[s("v-chip",{attrs:{close:"",selected:e.selected},on:{input:function(s){t.remove(e.item)}}},[t._v("\n                  "+t._s(e.item)+"\n              ")])]}}]),model:{value:t.tagList,callback:function(e){t.tagList=e},expression:"tagList"}}),s("v-btn",{staticClass:"mt-5 ml-0",attrs:{large:"",type:"submit",color:"primary",disabled:!t.valid},on:{click:t.submit}},[t._v("\n          Publish Article\n        ")])],1)],1)],1)],1)},pe=[],ge=!1,he=null,be=null,xe=null,ye=Object(f["a"])(ve,fe,pe,ge,he,be,xe),_e=ye.exports,we={state:{user:null},mutations:{setUser:function(t,e){t.user=e,localStorage.setItem("token",e.token)},clearUser:function(t){t.user=null,localStorage.removeItem("token")}},actions:{signUserUp:function(t,e){var s=t.commit;s("setLoading",!0),s("clearError"),Z.post("/users",e).then(function(t){s("setLoading",!1),s("setUser",t.data.user)}).catch(function(t){s("setLoading",!1),s("setError",t.response.data.message)})},signUserIn:function(t,e){var s=t.commit;s("setLoading",!0),s("clearError"),Z.post("/users/login",e).then(function(t){s("setLoading",!1),s("setUser",t.data.user)}).catch(function(t){s("setLoading",!1),s("setError",t.response.data.message)})},tryAutoLogin:function(t){var e=t.commit,s=localStorage.getItem("token");s&&(e("setLoading",!0),Z.get("/user").then(function(t){e("setLoading",!1),e("setUser",t.data.user)}).catch(function(){e("setLoading",!1)}))},logUserOut:function(t){var e=t.commit;e("clearUser")},updateUser:function(t,e){var s=t.commit;s("setLoading",!0),s("clearError"),Z.put("/user",e).then(function(t){s("setLoading",!1),s("setUser",t.data.user)}).catch(function(t){s("setLoading",!1),s("setError",t.response.data.message)})}}},ke={state:{loading:!1,error:null},mutations:{setLoading:function(t,e){t.loading=e},setError:function(t,e){t.error=e},clearError:function(t){t.error=null}},actions:{}},Ee={state:{},mutations:{},actions:{createArticle:function(t,e){var s=t.commit;return s("setLoading",!0),s("clearError"),Z.post("/articles",e).then(function(t){return s("setLoading",!1),t.data}).catch(function(t){s("setLoading",!1),s("setError",t.response.data.message)})}}};a["a"].use(c["a"]);var Le=new c["a"].Store({modules:{user:we,shared:ke,articles:Ee}}),Ce=function(t,e,s){Le.state.user.user?s():s("/login")};a["a"].use(Q["a"]);var $e=new Q["a"]({routes:[{path:"/",name:"home",component:Tt},{path:"/login",name:"signin",component:Mt},{path:"/register",name:"signup",component:ee},{path:"/settings",name:"settings",component:ce,beforeEnter:Ce},{path:"/editor",name:"editor",component:_e,beforeEnter:Ce}]}),Se=function(t){var e=new Date(t);return e.toLocaleString(["en-US"],{month:"short",day:"2-digit",year:"numeric"})};a["a"].use(i.a,{theme:{primary:o.a.green.lighten1}}),a["a"].config.productionTip=!1,a["a"].filter("date",Se),new a["a"]({router:$e,store:Le,render:function(t){return t(J)}}).$mount("#app")},gNjY:function(t,e){},n9Ul:function(t,e){},wcky:function(t,e){}},[0]);
//# sourceMappingURL=app.5413764a.js.map